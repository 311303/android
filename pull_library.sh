#!/bin/bash

PREBUILT_PATH="vendor/oneplus/"

list="
bin
etc/acdbdata/Fluid
etc/acdbdata/Liquid
etc/acdbdata/MTP
etc/cne
etc/cne/wqeclient
etc/data
etc/dpm
etc/dpm/nsrm
etc/firmware
etc/hostapd
etc/permissions
etc/sensors
etc/wifi
framework
lib
lib/hw
lib/soundfx
vendor/bin
vendor/lib/egl
vendor/lib/hw
vendor/lib
vendor/lib/qcdrm/playready/lib/drm
vendor/lib/qcdrm/playready/lib
vendor/lib/soundfx
"

for i in ${list}
do
  mkdir -p ${PREBUILT_PATH}${i}
done

bin_list="
adsprpcd
ATFWD-daemon
audiod
btnvtool
charger_monitor
cnd
diag_callback_client
diag_dci_sample
diag_klog
diag_mdlog
diag_socket_log
diag_uart_log
dpmd
drmdiagapp
dun-server
efsks
fmconfig
fmfactorytest
fmfactorytestserver
fm_qsoc_patches
ftmdaemon
garden_app
gpsone_daemon
hal_proxy_daemon
hci_qcomm_init
hostapd
hostapd_cli
hvdcp
imscmservice
imsdatadaemon
imsqmidaemon
ims_rtp_daemon
irsc_util
ks
loc_launcher
lowi-server
mm-pp-daemon
mm-qcamera-daemon
mm-qjpeg-dec-test
mm-qjpeg-enc-test
mm-qomx-idec-test
mm-qomx-ienc-test
mm-vidc-omx-test
mpdecision
netmgrd
nl_listener
n_smux
perfd
PktRspTest
port-bridge
profiler_daemon
ptt_socket_app
qcks
qcom-system-daemon
qmuxd
qseecomd
qseecom_sample_client
radish
rfs_access
rmt_storage
sensors.qcom
ssr_diag
ssr_setup
StoreKeybox
subsystem_ramdump
test_diag
time_daemon
wcnss_service
wdsdaemon
wpa_supplicant
xtwifi-client
xtwifi-inet-agent
"

for i in ${bin_list}
do
  adb pull /system/bin/${i} ${PREBUILT_PATH}bin/${i}
done

cd ${PREBUILT_PATH}bin
chmod 775 *
cd -

etc_list="
apns-conf.xml
acdbdata/Fluid/Fluid_Bluetooth_cal.acdb
acdbdata/Fluid/Fluid_General_cal.acdb
acdbdata/Fluid/Fluid_Global_cal.acdb
acdbdata/Fluid/Fluid_Handset_cal.acdb
acdbdata/Fluid/Fluid_Hdmi_cal.acdb
acdbdata/Fluid/Fluid_Headset_cal.acdb
acdbdata/Fluid/Fluid_Speaker_cal.acdb
acdbdata/Liquid/Liquid_Bluetooth_cal.acdb
acdbdata/Liquid/Liquid_General_cal.acdb
acdbdata/Liquid/Liquid_Global_cal.acdb
acdbdata/Liquid/Liquid_Handset_cal.acdb
acdbdata/Liquid/Liquid_Hdmi_cal.acdb
acdbdata/Liquid/Liquid_Headset_cal.acdb
acdbdata/Liquid/Liquid_Speaker_cal.acdb
acdbdata/MTP/MTP_Bluetooth_cal.acdb
acdbdata/MTP/MTP_General_cal.acdb
acdbdata/MTP/MTP_Global_cal.acdb
acdbdata/MTP/MTP_Handset_cal.acdb
acdbdata/MTP/MTP_Hdmi_cal.acdb
acdbdata/MTP/MTP_Headset_cal.acdb
acdbdata/MTP/MTP_Speaker_cal.acdb
cacert_location.pem
capability.xml
cne/andsfCne.xml
cne/SwimConfig.xml
cne/wqeclient/profile1.xml
cne/wqeclient/profile2.xml
cne/wqeclient/profile3.xml
cne/wqeclient/profile4.xml
cne/wqeclient/profile5.xml
data/dsi_config.xml
data/netmgr_config.xml
data/qmi_config.xml
dpm/dpm.conf
dpm/nsrm/NsrmConfiguration.xml
firmware/a225p5_pm4.fw
firmware/a225_pfp.fw
firmware/a225_pm4.fw
firmware/a300_pfp.fw
firmware/a300_pm4.fw
firmware/a330_pfp.fw
firmware/a330_pm4.fw
firmware/cpp_firmware_v1_1_1.fw
firmware/cpp_firmware_v1_1_6.fw
firmware/cpp_firmware_v1_2_0.fw
firmware/leia_pfp_470.fw
firmware/leia_pm4_470.fw
firmware/venus.b00
firmware/venus.b01
firmware/venus.b02
firmware/venus.b03
firmware/venus.b04
firmware/venus.mbn
firmware/venus.mdt
flp.conf
ftm_test_config
hostapd/hostapd.accept
hostapd/hostapd_default.conf
hostapd/hostapd.deny
izat.conf
lowi.conf
permissions/btmultisim.xml
permissions/cneapiclient.xml
permissions/com.qti.dpmframework.xml
permissions/com.qti.location.sdk.xml
permissions/com.qualcomm.location.vzw_library.xml
permissions/com.qualcomm.location.xml
permissions/com.quicinc.cne.xml
permissions/ConnectivityExt.xml
permissions/dpmapi.xml
permissions/embms.xml
permissions/imscm.xml
permissions/qcnvitems.xml
permissions/qcrilhook.xml
permissions/qti_permissions.xml
sap.conf
sensors/sensor_def_qcomdev.conf
thermal-engine-8974.conf
usf_settings.sh
wfdconfigsink.xml
wfdconfig.xml
wifi/p2p_supplicant_overlay.conf
wifi/wpa_supplicant.conf
wifi/wpa_supplicant_overlay.conf
xtra_root_cert.pem
xtwifi.conf
"

for i in ${etc_list}
do
  adb pull /system/etc/${i} ${PREBUILT_PATH}etc/${i}
done

lib_list="
hw/audio.primary.msm8974.so
hw/copybit.msm8974.so
hw/gps.default.so
hw/keystore.qcom.so
libantradio.so
libaudioroute.so
libextendedremotedisplay.so
libgps.utils.so
libloc_api_v02.so
libloc_core.so
libloc_eng.so
libmdmdetect.so
libmm-qcamera.so
libOmxAacEnc.so
libOmxAmrEnc.so
libOmxEvrcEnc.so
libOmxQcelp13Enc.so
libOmxVdecHevc.so
libparam.so
libqcomfm_jni.so
libqti_performance.so
libtinyxml2.so
libtinyxml.so
libwifi-hal-qcom.so
libwpa_client.so
soundfx/libqcompostprocbundle.so
"

for i in ${lib_list}
do
  adb pull /system/lib/${i} ${PREBUILT_PATH}lib/${i}
done

vendor_list="
bin/RIDLClient.exe
bin/slim_daemon
bin/thermal-engine
lib/egl/eglsubAndroid.so
lib/libmmcamera_hdr_gb_lib.so
lib/libstlport.so
lib/egl/libEGL_adreno.so
lib/egl/libGLESv1_CM_adreno.so
lib/egl/libGLESv2_adreno.so
lib/egl/libq3dtools_adreno.so
lib/hw/activity_recognition.msm8974.so
lib/hw/flp.default.so
lib/hw/sensors.msm8974.so
lib/libacdbloader.so
lib/libacdbmapper.so
lib/libacdbrtac.so
lib/libactuator_dw9714_camcorder.so
lib/libactuator_dw9714_camera.so
lib/libactuator_dw9714.so
lib/libactuator_dw9800w_camcorder.so
lib/libactuator_dw9800w_camera.so
lib/libactuator_dw9800w.so
lib/libadiertac.so
lib/libadreno_utils.so
lib/libadsprpc.so
lib/libalarmservice_jni.so
lib/libasn1cper.so
lib/libasn1crt.so
lib/libasn1crtx.so
lib/libaudcal.so
lib/libaudioalsa.so
lib/libbccQTI.so
lib/libbtnv.so
lib/libbt-vendor.so
lib/libC2D2.so
lib/libc2d30-a3xx.so
lib/libc2d30-a4xx.so
lib/libCB.so
lib/libchromatix_imx214_common.so
lib/libchromatix_imx214_default_video.so
lib/libchromatix_imx214_hfr_120.so
lib/libchromatix_imx214_hfr_60.so
lib/libchromatix_imx214_liveshot.so
lib/libchromatix_imx214_preview_binning.so
lib/libchromatix_imx214_preview.so
lib/libchromatix_imx214_snapshot_hdr.so
lib/libchromatix_imx214_snapshot.so
lib/libchromatix_imx214_video_binning.so
lib/libchromatix_ov5648_common.so
lib/libchromatix_ov5648_default_video.so
lib/libchromatix_ov5648_liveshot.so
lib/libchromatix_ov5648_preview_fb.so
lib/libchromatix_ov5648_preview.so
lib/libchromatix_ov5648_video_cmcc.so
lib/libchromatix_ov5648_zsl_fb.so
lib/libchromatix_ov5648_zsl.so
lib/libchromatix_ov8858_common.so
lib/libchromatix_ov8858_default_video.so
lib/libchromatix_ov8858_liveshot.so
lib/libchromatix_ov8858_preview_binding.so
lib/libchromatix_ov8858_preview.so
lib/libchromatix_ov8858_small_video.so
lib/libchromatix_ov8858_snapshot.so
lib/libchromatix_s5k3m2_common_panorama.so
lib/libchromatix_s5k3m2_common.so
lib/libchromatix_s5k3m2_default_video.so
lib/libchromatix_s5k3m2_hfr_120fps.so
lib/libchromatix_s5k3m2_hfr_60fps.so
lib/libchromatix_s5k3m2_hfr_90fps.so
lib/libchromatix_s5k3m2_liveshot.so
lib/libchromatix_s5k3m2_preview_panorama.so
lib/libchromatix_s5k3m2_preview.so
lib/libchromatix_s5k3m2_snapshot_panorama.so
lib/libchromatix_s5k3m2_snapshot.so
lib/libchromatix_s5k3m2_video_hd.so
lib/libchromatix_s5k3m2_zsl.so
lib/libcneapiclient.so
lib/libcneconn.so
lib/libcneqmiutils.so
lib/libcne.so
lib/libCommandSvc.so
lib/libconfigdb.so
lib/libconnctrl.so
lib/libdataitems.so
lib/libdiag.so
lib/libdisp-aba.so
lib/libDivxDrm.so
lib/lib-dplmedia.so
lib/libdpmframework.so
lib/libdpmnsrm.so
lib/libdrmdiag.so
lib/libdrmfs.so
lib/libdrmtime.so
lib/libdsi_netctrl.so
lib/libdsutils.so
lib/libExtendedExtractor.so
lib/libfastcvadsp_stub.so
lib/libfastcvopt.so
lib/libFileMux.so
lib/libflp.so
lib/libgdtap.so
lib/libgeofence.so
lib/libgsl.so
lib/libHevcSwDecoder.so
lib/libI420colorconvert.so
lib/libidl.so
lib/libimscamera_jni.so
lib/lib-imscamera.so
lib/lib-imsdpl.so
lib/libimsmedia_jni.so
lib/lib-imsqimf.so
lib/lib-imsrcscmclient.so
lib/lib-ims-rcscmjni.so
lib/lib-imsrcscmservice.so
lib/lib-imsrcscm.so
lib/lib-imsrcs.so
lib/lib-imsSDP.so
lib/lib-imss.so
lib/lib-imsvt.so
lib/lib-imsxml.so
lib/libizat_core.so
lib/libjpegdhw.so
lib/libjpegehw.so
lib/liblbs_core.so
lib/liblistenhardware.so
lib/liblistenjni.so
lib/liblisten.so
lib/liblistensoundmodel.so
lib/libllvm-qcom.so
lib/liblocationservice_glue.so
lib/liblocationservice.so
lib/liblisten.so
lib/libsrsprocessing.so
lib/libqmi_cci.so
lib/libidl.so
lib/libqmi_common_so.so
lib/libloc_ext.so
lib/libloc_xtra.so
lib/liblowi_client.so
lib/liblowi_wifihal_nl.so
lib/liblowi_wifihal.so
lib/liblqe.so
lib/libmm-abl-oem.so
lib/libmm-abl.so
lib/libmmcamera2_c2d_module.so
lib/libmmcamera2_cpp_module.so
lib/libmmcamera2_frame_algorithm.so
lib/libmmcamera2_iface_modules.so
lib/libmmcamera2_imglib_modules.so
lib/libmmcamera2_isp_modules.so
lib/libmmcamera2_is.so
lib/libmmcamera2_pproc_modules.so
lib/libmmcamera2_q3a_core.so
lib/libmmcamera2_sensor_modules.so
lib/libmmcamera2_stats_algorithm.so
lib/libmmcamera2_stats_modules.so
lib/libmmcamera2_vpe_module.so
lib/libmmcamera2_wnr_module.so
lib/libmmcamera_cac_lib.so
lib/libmmcamera_dw9761b_eeprom.so
lib/libmmcamera_faceproc.so
lib/libmmcamera_hdr_gb_lib.so
lib/libmmcamera_hdr_lib.so
lib/libmmcamera_imglib.so
lib/libmmcamera_imx214.so
lib/libmmcamera_ofilm_oty5f03_eeprom.so
lib/libmmcamera_ov5648.so
lib/libmmcamera_ov8858.so
lib/libmmcamera_pdafcamif.so
lib/libmmcamera_pdaf.so
lib/libmmcamera_s5k3l8.so
lib/libmmcamera_s5k3m2.so
lib/libmmcamera_sunny_f13s01l_eeprom.so
lib/libmmcamera_sunny_p12v01m_eeprom.so
lib/libmmcamera_sunny_p5v23c_eeprom.so
lib/libmmcamera_sunny_p8v12b_eeprom.so
lib/libmmcamera_sunny_q8v18a_eeprom.so
lib/libmmcamera_tintless_algo.so
lib/libmmcamera_tintless_bg_pca_algo.so
lib/libmmcamera_truly_cm7700_eeprom.so
lib/libmmcamera_wavelet_lib.so
lib/libmm-color-convertor.so
lib/libmm-hdcpmgr.so
lib/libmmhttpstack.so
lib/libmmiipstreammmihttp.so
lib/libmmipl.so
lib/libmmipstreamaal.so
lib/libmmipstreamnetwork.so
lib/libmmipstreamsourcehttp.so
lib/libmmipstreamutils.so
lib/libmmjpeg.so
lib/libmmosal.so
lib/libmmparser.so
lib/libmmqjpeg_codec.so
lib/libmmQSM.so
lib/libmmrtpdecoder.so
lib/libmmrtpencoder.so
lib/libmmwfdinterface.so
lib/libmmwfdsinkinterface.so
lib/libmmwfdsrcinterface.so
lib/libnetmgr.so
lib/libNimsWrap.so
lib/liboemcamera.so
lib/libOmxAacDec.so
lib/libOmxAmrwbplusDec.so
lib/libOmxEvrcDec.so
lib/libOmxMux.so
lib/libOmxQcelp13Dec.so
lib/libOmxWmaDec.so
lib/libOpenCL.so
lib/libperipheral_client.so
lib/libprofiler_msmadc.so
lib/libqcci_legacy.so
lib/libqc-opt.so
lib/libqdi.so
lib/libqdp.so
lib/libqmi_cci.so
lib/libqmi_client_helper.so
lib/libqmi_client_qmux.so
lib/libqmi_common_so.so
lib/libqmi_csi.so
lib/libqmi_encdec.so
lib/libqmiservices.so
lib/libqmi.so
lib/libqomx_jpegdec.so
lib/libqomx_jpegenc.so
lib/libQSEEComAPI.so
lib/libqti-perfd-client.so
lib/libQtiTether.so
lib/libquipc_os_api.so
lib/lib-rcsimssjni.so
lib/lib-rcsjni.so
lib/libril-qc-qmi-1.so
lib/libril-qc-radioconfig.so
lib/libril-qcril-hook-oem.so
lib/librpmb.so
lib/librs_adreno_sha1.so
lib/librs_adreno.so
lib/libRSDriver_adreno.so
lib/lib-rtpcommon.so
lib/lib-rtpcore.so
lib/lib-rtpdaemoninterface.so
lib/lib-rtpsl.so
lib/libsc-a2xx.so
lib/libsc-a3xx.so
lib/libscale.so
lib/libscve.so
lib/libscve_stub.so
lib/libsensor1.so
lib/libsensor_reg.so
lib/libSHIMDivxDrm.so
lib/libslimclient.so
lib/libsmemlog.so
lib/libsregex.so
lib/libsrsprocessing.so
lib/libssd.so
lib/libsubsystem_control.so
lib/libSubSystemShutdown.so
lib/libsystem_health_mon.so
lib/libtar.so
lib/libthermalclient.so
lib/libthermalioctl.so
lib/libtime_genoff.so
lib/libTimeService.so
lib/libtzdrmgenprov.so
lib/libulp2.so
lib/libvcel.so
lib/libvendorconn.so
lib/libVenusMbiConv.so
lib/libwfdcommonutils.so
lib/libwfdhdcpcp.so
lib/libwfdmmsink.so
lib/libwfdmmsrc.so
lib/libwfdmmutils.so
lib/libwfdnative.so
lib/libwfdrtsp.so
lib/libwfdsm.so
lib/libwfduibcinterface.so
lib/libwfduibcsinkinterface.so
lib/libwfduibcsink.so
lib/libwfduibcsrcinterface.so
lib/libwfduibcsrc.so
lib/libwms.so
lib/libwqe.so
lib/libxml.so
lib/libxtadapter.so
lib/libxt_native.so
lib/libxtwifi_ulp_adaptor.so
lib/qcdrm/playready/lib/drm/libdrmprplugin_customer.so
lib/qcdrm/playready/lib/libprdrmdecrypt_customer.so
lib/qcdrm/playready/lib/libtzplayready_customer.so
lib/soundfx/libqcbassboost.so
lib/soundfx/libqcreverb.so
lib/soundfx/libqcvirt.so
"

for i in ${vendor_list}
do
  adb pull /system/vendor/${i} ${PREBUILT_PATH}vendor/${i}
done


framework_list="
cneapiclient.jar
com.qti.dpmframework.jar
com.quicinc.cne.jar
ConnectivityExt.jar
dpmapi.jar
embmslibrary.jar
imscmlibrary.jar
qmapbridge.jar
rcsimssettings.jar
rcsservice.jar
"

for i in ${framework_list}
do
  adb pull /system/framework/${i} ${PREBUILT_PATH}framework/${i}
done
